<app-navbar></app-navbar>

<app-banner-principal></app-banner-principal>

<div class="container py-4">
  <div class="d-flex align-items-center gap-3">
    <h2 class="fs-4 mb-0">Populares</h2>

    <div class="btn-group rounded-pill overflow-hidden" role="group">
      <input
        (change)="midiasPopularesSubject$.next(tipoMidia.Filme)"
        checked="true"
        type="radio"
        class="btn-check"
        name="tipoMidiasPopulares"
        id="radioMidiasPopularesFilmes"
      />
      <label for="radioMidiasPopularesFilmes" class="btn btn-sm btn-outline-primary border-0"
        >Filmes</label
      >

      <input
        (change)="midiasPopularesSubject$.next(tipoMidia.Tv)"
        type="radio"
        class="btn-check"
        name="tipoMidiasPopulares"
        id="radioMidiasPopularesTv"
      />
      <label for="radioMidiasPopularesTv" class="btn btn-sm btn-outline-primary border-0">TV</label>
    </div>
  </div>

  <div class="row flex-nowrap overflow-x-scroll g-3 mt-1 px-1 app-scrollbar-customizado">
    @for (midia of (midiasPopulares$ | async)?.results; track midia.id) {
    <div class="col-7 col-lg-3 col-xl-2">
      <div class="card rounded-3 app-card-filme">
        <img
          class="card-img-top rounded-3"
          style="min-height: 230px"
          [src]="midia.poster_path"
          [alt]="midia.title ?? midia.name"
        />
      </div>

      <div class="mt-2">
        <small class="text-muted">{{ midia.release_date ?? midia.first_air_date }}</small>
        <p class="app-titulo-card fw-bold">
          {{ (midia.title ?? midia.name)?.slice(0, 30) }}
        </p>
      </div>
    </div>
    }
  </div>

  <div class="d-flex align-items-center gap-3 mt-4">
    <h2 class="fs-4 mb-0">Mais Votados</h2>

    <div class="btn-group rounded-pill overflow-hidden" role="group">
      <input
        (change)="midiasMaisVotadasSubject$.next(tipoMidia.Filme)"
        checked="true"
        type="radio"
        class="btn-check"
        name="tipoMidiasMaisVotadas"
        id="radioMidiasMaisVotadasFilmes"
      />
      <label for="radioMidiasMaisVotadasFilmes" class="btn btn-sm btn-outline-primary border-0"
        >Filmes</label
      >

      <input
        (change)="midiasMaisVotadasSubject$.next(tipoMidia.Tv)"
        type="radio"
        class="btn-check"
        name="tipoMidiasMaisVotadas"
        id="radioMidiasMaisVotadasTv"
      />
      <label for="radioMidiasMaisVotadasTv" class="btn btn-sm btn-outline-primary border-0"
        >TV</label
      >
    </div>
  </div>

  <div class="row flex-nowrap overflow-x-scroll g-3 mt-1 px-1 app-scrollbar-customizado">
    @for (midia of (midiasMaisVotadas$ | async)?.results; track midia.id) {
    <div class="col-7 col-lg-3 col-xl-2">
      <div class="card rounded-3 app-card-filme">
        <img
          class="card-img-top rounded-3"
          style="min-height: 230px"
          [src]="midia.poster_path"
          [alt]="midia.title ?? midia.name"
        />
      </div>

      <div class="mt-2">
        <small class="text-muted">{{ midia.release_date ?? midia.first_air_date }}</small>
        <p class="app-titulo-card fw-bold">
          {{ (midia.title ?? midia.name)?.slice(0, 30) }}
        </p>
      </div>
    </div>
    }
  </div>

  <h2 class="fs-4 mb-0 mt-4">Filmes em Cartaz</h2>

  <div class="row flex-nowrap overflow-x-scroll g-3 mt-1 px-1 app-scrollbar-customizado">
    @for (midia of (filmesEmCartaz$ | async)?.results; track midia.id) {
    <div class="col-7 col-lg-3 col-xl-2">
      <div class="card rounded-3 app-card-filme">
        <img
          class="card-img-top rounded-3"
          style="min-height: 230px"
          [src]="midia.poster_path"
          [alt]="midia.title ?? midia.name"
        />
      </div>

      <div class="mt-2">
        <small class="text-muted">{{ midia.release_date ?? midia.first_air_date }}</small>
        <p class="app-titulo-card fw-bold">
          {{ (midia.title ?? midia.name)?.slice(0, 30) }}
        </p>
      </div>
    </div>
    }
  </div>
</div>
