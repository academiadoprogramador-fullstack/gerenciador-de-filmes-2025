import{a as V}from"./chunk-335MBLFJ.js";import{b as N}from"./chunk-P3MJXSK4.js";import{$ as c,A as a,D as F,J as u,K as _,L as P,M as f,N as y,O as v,P as r,Q as n,R as g,U as j,W as q,Y as C,ba as b,d as h,f as p,g as B,i as x,j as T,ja as A,k as E,ka as s,la as l,q as S,r as M,s as w,sa as D,ta as k,za as I}from"./chunk-2QLKEBW5.js";var L=(i,e)=>({"btn-outline-primary":i,"btn-primary":e}),z=(i,e)=>e.id;function G(i,e){if(i&1&&(r(0,"div",4),g(1,"app-card-midia",5),n()),i&2){let t=e.$implicit;a(),v("tipoMidia",t.media_type)("midia",t)}}function H(i,e){i&1&&(r(0,"div",2),f(1,G,2,2,"div",4,z),n()),i&2&&(a(),y(e))}function J(i,e){if(i&1&&(r(0,"div",4),g(1,"app-card-midia",5),n()),i&2){let t=e.$implicit;a(),v("tipoMidia",t.media_type)("midia",t)}}function K(i,e){i&1&&(r(0,"div",2),f(1,J,2,2,"div",4,z),n()),i&2&&(a(),y(e))}function O(i,e){if(i&1){let t=j();r(0,"button",7),q("click",function(){let d=M(t).$implicit,m=C(2);return w(m.paginaSubject$.next(d))}),c(1),n()}if(i&2){let t=e.$implicit,o=C();v("ngClass",A(2,L,o.paginaAtual!==t,o.paginaAtual===t)),a(),b(" ",t," ")}}function Q(i,e){i&1&&(r(0,"section",3),f(1,O,2,5,"button",6,P),n()),i&2&&(a(),y(e.paginas))}var R=class i{route=S(I);midiaService=S(N);paginaSubject$=new h(1);queryParam$=this.route.queryParamMap.pipe(x(e=>e.has("query")),p(e=>e.get("query")));midiasSelecionadas$=B([this.paginaSubject$,this.queryParam$]).pipe(E(([e,t])=>this.midiaService.buscarMidias(t,e)),T({bufferSize:1,refCount:!0}));filmesSelecionados$=this.midiasSelecionadas$.pipe(p(e=>e.results.filter(t=>t.media_type==="filme")));seriesSelecionadas$=this.midiasSelecionadas$.pipe(p(e=>e.results.filter(t=>t.media_type==="tv")));paginasDisponiveis$=this.midiasSelecionadas$.pipe(p(e=>({paginaAtual:e.page,totalPaginas:e.total_pages,paginas:Array.from({length:e.total_pages},(t,o)=>o+1)})));static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["app-busca"]],decls:15,vars:12,consts:[[1,"container","my-4"],[1,"mt-4"],[1,"row","g-3","mt-2"],["id","paginacao",1,"row","justify-content-center","gap-2","mt-2","g-2"],[1,"col-7","col-lg-3","col-xl-2"],[3,"tipoMidia","midia"],[1,"col-auto","btn","btn-sm","rounded-circle",2,"min-width","33px",3,"ngClass"],[1,"col-auto","btn","btn-sm","rounded-circle",2,"min-width","33px",3,"click","ngClass"]],template:function(t,o){if(t&1&&(r(0,"div",0)(1,"h1"),c(2),s(3,"async"),n(),r(4,"h3",1),c(5,"Filmes"),n(),u(6,H,3,0,"div",2),s(7,"async"),g(8,"hr"),r(9,"h3",1),c(10,"S\xE9ries"),n(),u(11,K,3,0,"div",2),s(12,"async"),u(13,Q,3,0,"section",3),s(14,"async"),n()),t&2){let d,m,$;a(2),b('Busca por "',l(3,4,o.queryParam$),'"'),a(4),_((d=l(7,6,o.filmesSelecionados$))?6:-1,d),a(5),_((m=l(12,8,o.seriesSelecionadas$))?11:-1,m),a(2),_(($=l(14,10,o.paginasDisponiveis$))?13:-1,$)}},dependencies:[V,D,k],encapsulation:2})};export{R as Busca};
